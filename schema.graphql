# source: http://localhost:4000/graphql
# timestamp: Wed Jul 28 2021 23:56:56 GMT+0700 (Western Indonesia Time)

type ActionInfo {
  hasError: Boolean
  message: String
}

type ActionOnStorePayload {
  actionInfo: ActionInfo
  store: Store
}

type ActionOnUserPayload {
  actionInfo: ActionInfo
  user: User
}

input AddressInput {
  fullAddress: String!
  lat: Int!
  lng: Int!
}

type Attribute {
  id: ID
  name: String
  icon: Image
}

type Category {
  id: ID
  name: String
  code: String
  level: Int
  isPublished: Boolean
  icon: Image
}

"""
The Email scalar type represents E-Mail addresses compliant to RFC 822.
"""
scalar Email

type Image {
  id: ID
  url: String
  height: Float
  width: Float
  aspectRatio: Float
  bytes: Float
  format: String
  display: Int
}

type Mutation {
  login(loginId: String!, password: String!): ActionOnUserPayload
  addIcon(id: String!, url: String!): String
  createProduct(name: String!, desc: String!, categoryId: String!, ownerId: String!, rentalPeriodUnitId: String!, price: Float!): String
  setProductImage(id: String!, url: String!): String
  setAttributeIcon(id: String!, url: String!): String
  updateDescription(id: String!, desc: String!): String
  addSpec(id: String!, attributeId: String!, value: String!): String
  sendOtpCode(mobileNumber: String!, action: UserActionEnum): SendOtpPayload
  register(name: String!, loginId: String!, password: String!): ActionOnUserPayload
  logout: ActionInfo
  updateProfile(input: RecipeInput!): ActionOnUserPayload
  createStore(name: String!, whatsappNumber: String!): ActionOnStorePayload
  updateStoreAddress(id: String!, address: AddressInput!): ActionOnStorePayload
}

"""Information about pagination in a connection."""
type PageInfo {
  """When paginating forwards, are there more items?"""
  hasNextPage: Boolean!

  """When paginating backwards, are there more items?"""
  hasPreviousPage: Boolean!

  """When paginating backwards, the cursor to continue."""
  startCursor: String

  """When paginating forwards, the cursor to continue."""
  endCursor: String
}

type Product {
  id: ID
  name: String
  desc: String
  price: Float
  rentalPeriodUnit: Unit
  category: Category
  merchant: User
  store: Store
  isPublished: Boolean
  stock: Int
  images: [Image]
  specs: [Specification]
}

"""A connection to a list of items."""
type ProductConnection {
  """Information to aid in pagination."""
  pageInfo: PageInfo!

  """A list of edges."""
  edges: [ProductEdge]
}

"""An edge in a connection."""
type ProductEdge {
  """The item at the end of the edge"""
  node: Product

  """A cursor for use in pagination"""
  cursor: String!
}

type Query {
  mobileNumberExists(mobileNumber: String!): Boolean
  me: User
  attributes: [Attribute]
  categories: [Category]
  category(id: String!): Category
  units: [Unit]
  product(id: String!): Product
  user(id: String!): User
  featuredProducts: [Product]
  search(q: String!, categoryId: String, published: Boolean, after: String, first: Int): ProductConnection
}

input RecipeInput {
  name: String!
  mobileNumber: String!
  email: Email
}

type SendOtpPayload {
  actionInfo: ActionInfo
  cooldownExpiry: String
  expiry: String
}

type Specification {
  id: ID
  attribute: Attribute
  value: String
}

type Store {
  id: ID
  name: String
  whatsappNumber: String
  whatsappLink: String
}

type Subscription {
  test: String
}

type Unit {
  id: ID
  display: String
}

type User {
  id: ID
  name: String
  mobileNumber: String
  profilePicture: Image
  store: Store
}

enum UserActionEnum {
  login
  register
}
